<!DOCTYPE html>
<html>
<head>
    <title>Саад бултагч</title>
    <style>
        body { background: #1a1a1a; 
            text-align: center; 
            color: white; 
            font-family: sans-serif; 
            overflow: hidden;
            background-image: url(chill.png); 
            background-size: cover;     
            background-repeat: no-repeat; 
            background-position: center;  
            background-attachment: fixed; 
        }
      
        canvas { background: #333; 
            border: 4px solid #fff; 
            box-shadow: 0 0 20px rgba(0,0,0,0.5); 
            margin-top: 20px; }
    </style>
</head>
<body>
    <h2> СААД БУЛТАГЧ</h2>
    <p>Баруун, Зүүн сумаар удирдана</p>
    <canvas id="gameCanvas" width="400" height="500"></canvas>

    <script>
       
        const canvas = document.getElementById('gameCanvas'); // HTML дээрх canvas-ыг барьж авах
        const ctx = canvas.getContext('2d'); // Зураг зурах 2D багажийг бэлдэх

        // Тоглогчийн анхны байршил болон хэмжээ
        let player = { x: 180, y: 440, urgun: 40, undur: 40 };
        
        // Саадын тохиргоо (ЭНД ХУРДЫГ ТОХИРУУЛНА)
        let saad = { 
            x: Math.random() * 370, // Хөндлөн чиглэлд санамсаргүй байрлалд эхлэх
            y: 0,                   // Дээрээс эхлэх
            hemjee: 30,             // Саадын хэмжээ
            hurd: 3                // АНХНЫ ХУРД (Үүнийг өөрчилж хурдыг тааруулна)
        };
        
        let onoo = 0; // Оноог хадгалах хувьсагч
        let tovch = {}; // Гарны ямар товч дарагдсаныг хадгалах объект

        
        window.addEventListener('keydown', (e) => tovch[e.code] = true);
        window.addEventListener('keyup', (e) => tovch[e.code] = false);

        // 3. ТОГЛООМЫН ГОЛЛОХ ФУНКЦ (Секундэд 60 удаа ажиллана)
        function togloom() {
            // Өмнөх зурсан дүрсийг арилгаж дэлгэцийг цэвэрлэх
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Тоглогчийг зүүн тийш хөдөлгөх (Хананаас гаргахгүй)
            if (tovch['ArrowLeft'] && player.x > 0) player.x -= 5;
            // Тоглогчийг баруун тийш хөдөлгөх
            if (tovch['ArrowRight'] && player.x < canvas.width - player.urgun) player.x += 7;

            // Саадыг доош нь унагах (Y тэнхлэгийн дагуу хурдаар нэмэх)
            saad.y += saad.hurd;

            // Саад дэлгэцийн доод хэсэгт хүрсэн үед (Амжилттай бултсан)
            if (saad.y > canvas.height) {
                saad.y = -30; // Саадыг буцаагаад дээр гаргах
                saad.x = Math.random() * (canvas.width - 30); // Шинэ санамсаргүй X байрлал өгөх
                onoo++; // Оноог нэмэх
                saad.hurd += 0.1; // ХУРД НЭМЭХ (Тоглоом явах тусам улам хурдасна)
            }

            
            if (saad.y + saad.hemjee > player.y && 
                saad.y < player.y + player.undur && 
                saad.x + saad.hemjee > player.x && 
                saad.x < player.x + player.urgun) {
                
                alert("ТОГЛООМ ДУУСЛАА! Оноо: " + onoo); // Мэдээлэл харуулах
                document.location.reload(); 
                return; // Функцыг зогсоох
            }

            // ТОГЛОГЧИЙГ ЗУРАХ
            ctx.fillStyle = "#00ff00"; // Ногоон өнгө сонгох
            ctx.fillRect(player.x, player.y, player.urgun, player.undur); // Дөрвөлжин зурах

            // СААДЫГ ЗУРАХ
            ctx.fillStyle = "#ff4d4d"; // Улаан өнгө сонгох
            ctx.fillRect(saad.x, saad.y, saad.hemjee, saad.hemjee);

            // ОНООГ ХЭВЛЭХ
            ctx.fillStyle = "white"; // Цагаан өнгөөр
            ctx.font = "20px Arial"; // Үсгийн хэмжээ болон загвар
            ctx.fillText("Оноо: " + onoo, 20, 30); // Байршил X=20, Y=30 дээр бичих

            // Дараагийн кадрыг дахин зурах хүсэлт илгээх (Loop үүсгэх)
            requestAnimationFrame(togloom); 
        }

        // Тоглоомыг анх эхлүүлж ажиллуулах
        togloom(); 
    </script>
</body>
</html>
